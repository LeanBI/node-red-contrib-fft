<script type="text/javascript">
    RED.nodes.registerType('fft',{
        category: 'function',
        color: '#a6bbcf',
        defaults: {
        	input: {value:'payload'},
        	fields: {value: 'accelerometer_x,accelerometer_y,accelerometer_z'},
            inputType: {value:'msg'},
            transformType: {value:""},
            out_prefix:{value:'fft_'}
        },
        inputs:1,
        outputs:1,
        icon: "frequence.png",
        label: function() {
            return this.name||"fft";
        },
        oneditprepare: function() {
            if (!this.inputType) {
              this.inputType = 'msg';
            }
            $('#node-input-input').typedInput({
              default: 'msg',
              types: ['msg','flow','global','date','str'],
              typeField: $('#node-input-inputType')
            });
            if (!this.outputType) {
              this.outputType = 'msg';
            }
            $('#node-input-output').typedInput({
              default: 'msg',
              types: ['msg','flow','global'],
              typeField: $('#node-input-outputType')
            });
            }
    });
</script>

<script type="text/x-red" data-template-name="fft">
    <!-- INPUT -->
    <div class="form-row">
        <label for="node-input-input"><i class="fa fa-arrow-left"></i>Input array</label>
        <input type="text" id="node-input-input"  placeholder="">
    </div>
    <div class="form-row">
        <label for="node-input-fields"><i class="icon-tag"></i>fields to transform</label>
        <input type="text" id="node-input-fields"  placeholder="accelerometer_x,accelerometer_y,accelerometer_z">
    </div>
    <div class="form-row">
        <label for="node-input-out_prefix"></i>Output field prefix</label>
        <input type="text" id="node-input-out_prefix" placeholder="fft_">
    </div>
    <div class="form-row">
        <label for="node-input-transformType">Type</label>
        <select type="text" id="node-input-transformType">
            <option value="real">real</option>
            <option value="complex">complex</option>
        </select>
    </div>
</script>

<script type="text/x-red" data-help-array="fft">
    <p>Transform series within an array via fft fast fourier transformation</p>
</script>